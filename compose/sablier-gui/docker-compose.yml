services:
  sablier-gui:
    container_name: sablier-gui
    hostname: sablier-gui
    networks:
      traefik_network: {}
    stop_signal: SIGINT
    depends_on:
      - sablier-gui-db
    environment:
      - PYTHONUNBUFFERED=1
      - TZ=${TZ}
      - DB_HOST=sablier-gui-db
      - DB_PORT=3306
      - DB_USER=sablier
      - DB_PASSWORD=${DATABASE_PASSWORD}
      - DB_NAME=sablier-gui-db
      - DOMAIN_NAME=${DOMAINNAME}
      - SABLIER_URL=http://sablier:10000
      - SABLIER_DEFAULT_SESSION_DURATION=${SABLIER_DEFAULT_SESSION_DURATION}
      - SABLIER_DEFAULT_THEME=${SABLIER_DEFAULT_THEME}
      - TRUSTED_PROXY_IPS=${SABLIER_TRUSTED_PROXY_IPS}

  sablier-gui-db:
    image: mariadb:10.11
    container_name: sablier-gui-db
    hostname: sablier-gui-sb
    networks:
      traefik_network: {}
    environment:
      - MYSQL_ROOT_PASSWORD=${SABLIER_GUI_DB_ROOT_PASSWORD}
      - MYSQL_DATABASE=sablier-gui-db
      - MYSQL_USER=sablier
      - MYSQL_PASSWORD=${DATABASE_PASSWORD}
      - TZ=${TZ}